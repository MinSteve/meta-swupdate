--- sources.orig/meta-swupdate/recipes-support/swupdate/swupdate_%.bbappend	1970-01-01 08:00:00.000000000 +0800
+++ sources/meta-swupdate/recipes-support/swupdate/swupdate_%.bbappend	2021-08-10 12:56:19.825179414 +0800
@@ -0,0 +1,16 @@
+
+FILES_${PN} += "/www/*"
+
+SRC_URI += "file://0001-mongoose-enable-cgi.patch \
+            file://0002-add-sysinfo.cgi.patch  \
+            "
+
+RDEPENDS_${PN}-www += "bash"
+
+
+
+do_install_append () {
+
+     chmod 0755 ${D}/www/sysinfo.cgi
+
+}
diff -Nuarp sources.orig/meta-swupdate/recipes-support/swupdate/files/0001-mongoose-enable-cgi.patch sources/meta-swupdate/recipes-support/swupdate/files/0001-mongoose-enable-cgi.patch
--- sources.orig/meta-swupdate/recipes-support/swupdate/files/0001-mongoose-enable-cgi.patch	1970-01-01 08:00:00.000000000 +0800
+++ sources/meta-swupdate/recipes-support/swupdate/files/0001-mongoose-enable-cgi.patch	2021-08-10 12:56:03.917098086 +0800
@@ -0,0 +1,10 @@
+--- git/mongoose/Makefile.orig	2021-06-06 17:50:55.860897116 +0800
++++ git/mongoose/Makefile	2021-06-06 17:55:20.710248918 +0800
+@@ -2,6 +2,7 @@
+ ifneq ($(CONFIG_MONGOOSE),)
+ KBUILD_CFLAGS += -DMG_ENABLE_HTTP_STREAMING_MULTIPART=1
+ KBUILD_CFLAGS += -DMG_ENABLE_HTTP_WEBSOCKET=1 -DMG_ENABLE_THREADS=1
++KBUILD_CFLAGS += -DMG_ENABLE_HTTP_CGI=1 
+ ifneq ($(CONFIG_MONGOOSEIPV6),)
+ KBUILD_CFLAGS += -DMG_ENABLE_IPV6=1
+ endif
diff -Nuarp sources.orig/meta-swupdate/recipes-support/swupdate/files/0002-add-sysinfo.cgi.patch sources/meta-swupdate/recipes-support/swupdate/files/0002-add-sysinfo.cgi.patch
--- sources.orig/meta-swupdate/recipes-support/swupdate/files/0002-add-sysinfo.cgi.patch	1970-01-01 08:00:00.000000000 +0800
+++ sources/meta-swupdate/recipes-support/swupdate/files/0002-add-sysinfo.cgi.patch	2021-08-10 12:56:03.917098086 +0800
@@ -0,0 +1,37 @@
+--- git.orig/web-app/sysinfo.cgi       1970-01-01 08:00:00.000000000 +0800
++++ git/web-app/sysinfo.cgi    2021-06-08 23:07:45.582795235 +0800
+@@ -0,0 +1,15 @@
++#!/bin/bash
++
++echo "Content-type: text/html"
++echo ""
++echo '<html>'
++echo '<head>'
++echo '<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">'
++echo '<title>system information</title>'
++echo '</head>'
++echo '<body>'
++echo "$(uname -a) </br>"
++echo $(cat /proc/cmdline)
++echo '</body>'
++echo '</html>'
++exit 0
+
+--- git.orig/examples/www/v2/sysinfo.cgi       1970-01-01 08:00:00.000000000 +0800
++++ git/examples/www/v2/sysinfo.cgi    2021-06-08 23:07:45.582795235 +0800
+@@ -0,0 +1,15 @@
++#!/bin/bash
++
++echo "Content-type: text/html"
++echo ""
++echo '<html>'
++echo '<head>'
++echo '<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">'
++echo '<title>system information</title>'
++echo '</head>'
++echo '<body>'
++echo "$(uname -a) </br>"
++echo $(cat /proc/cmdline)
++echo '</body>'
++echo '</html>'
++exit 0
